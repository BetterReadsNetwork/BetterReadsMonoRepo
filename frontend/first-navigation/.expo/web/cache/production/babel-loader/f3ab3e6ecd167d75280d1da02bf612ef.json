{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import*as React from'react';import Button from\"react-native-web/dist/exports/Button\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import TextInput from\"react-native-web/dist/exports/TextInput\";import FlatList from\"react-native-web/dist/exports/FlatList\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";var Browse=function(_React$Component){_inherits(Browse,_React$Component);function Browse(props){var _this;_classCallCheck(this,Browse);_this=_possibleConstructorReturn(this,_getPrototypeOf(Browse).call(this,props));_this.addToLibrary=function(book){return fetch('http://localhost:4444/createBook?title='+book,{method:'GET'}).then(function(res){return res.json();}).then(function(response){console.error(\"Sucess\");_this.props.navigation.navigate('Library');}).catch(function(error){console.error(error);_this.props.navigation.navigate('Library');});};_this.state={isLoading:true,query:_this.props.navigation.query};return _this;}_createClass(Browse,[{key:\"startDiscussion\",value:function startDiscussion(book){var _this2=this;return fetch('http://localhost:4444/createThread?title='+book,{method:'GET'}).then(function(res){return res.json();}).then(function(response){console.error(\"Sucess\");_this2.props.navigation.navigate('Discussions');}).catch(function(error){console.error(error);_this2.props.navigation.navigate('Discussions');});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var url='http://localhost:4444/api/browse/'+this.props.navigation.getParam('query','NO-ID');return fetch(url,{method:'GET'}).then(function(res){return res.json();}).then(function(response){console.error(\"Sucess\");_this3.setState({isLoading:false,dataSource:response,url:url},function(){});}).catch(function(error){console.error(error);});}},{key:\"render\",value:function render(){var _this4=this;var navigate=this.props.navigation.navigate;if(this.state.isLoading){return React.createElement(View,{style:{flex:1,padding:20}},React.createElement(ActivityIndicator,null));}return React.createElement(View,{style:{flex:1,alignItems:'center',justifyContent:'center'}},React.createElement(Text,null,this.state.url),React.createElement(\"h1\",null,this.props.navigation.getParam('query','NO-ID')),this.state.dataSource.map(function(book){return React.createElement(View,{style:{flex:1,alignItems:'center',justifyContent:'center'}},book.results[0]['work'].map(function(work){return React.createElement(View,null,React.createElement(Image,{style:{width:50,height:50},source:{uri:work.best_book[0].image_url[0]}}),React.createElement(Text,null,\" \",work.best_book[0].title[0]),React.createElement(Button,{title:\"Add To Library\",onPress:function onPress(){return _this4.addToLibrary(work.best_book[0].title[0]);}}),React.createElement(Button,{title:\"Start Discussion\",onPress:function onPress(){return _this4.startDiscussion(work.best_book[0].title[0]);}}));}));}));}}]);return Browse;}(React.Component);export{Browse as default};","map":{"version":3,"sources":["/home/steffen/UPenn19-20/CIS350/BetterReadsMonoRepo/frontend/first-navigation/views/Browse.js"],"names":["React","Browse","props","addToLibrary","book","fetch","method","then","res","json","response","console","error","navigation","navigate","catch","state","isLoading","query","url","getParam","setState","dataSource","flex","padding","alignItems","justifyContent","map","results","work","width","height","uri","best_book","image_url","title","startDiscussion","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Button, View, Text ,Image, TextInput,FlatList,ActivityIndicator } from 'react-native';\nexport default class Browse extends React.Component {\n   constructor(props){\n    super(props);\n    this.state ={ isLoading: true, query:                 this.props.navigation.query}\n  }\n\n  addToLibrary =(book)=>{\n    return fetch('http://localhost:4444/createBook?title='+book, {\n      method: 'GET'\n     \n    }).then(res=>res.json())\n    .then(response =>{\n      console.error(\"Sucess\");\n       \n         this.props.navigation.navigate('Library')\n    }\n\n    ).catch((error) =>{\n      console.error(error);\n      this.props.navigation.navigate('Library')\n    });\n    \n  } \n  startDiscussion(book){\n   return fetch('http://localhost:4444/createThread?title='+book, {\n      method: 'GET'\n     \n    }).then(res=>res.json())\n    .then(response =>{\n      console.error(\"Sucess\");\n        this.props.navigation.navigate('Discussions')\n    }\n\n    ).catch((error) =>{\n      console.error(error);\n       this.props.navigation.navigate('Discussions')\n    });\n   \n  }\n  componentDidMount(){\n   var url = 'http://localhost:4444/api/browse/'+this.props.navigation.getParam('query','NO-ID')\n    return fetch(url, {\n      method: 'GET'\n      //,body: JSON.stringify({query: 'Potter'}),\n      \n     /* headers: {\n        'Content-Type': 'application/json'\n      } */\n    }).then(res=>res.json())\n    .then(response =>{\n      console.error(\"Sucess\");\n       this.setState({\n          isLoading: false,\n          dataSource: response,\n          url: url\n        }, function(){\n\n        });\n    }\n\n    ).catch((error) =>{\n      console.error(error);\n    });\n  }\n  render() {\n    const {navigate} = this.props.navigation;\n    if(this.state.isLoading){\n      return(\n        <View style={{flex: 1, padding: 20}}>\n          <ActivityIndicator/>\n        </View>\n      )\n    }\n    return (\n      \n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n      <Text>{this.state.url}</Text>\n      <h1>{this.props.navigation.getParam('query','NO-ID')}</h1>\n        {this.state.dataSource.map((book) =>{\n          return ( \n             <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n            \n            {\n              book.results[0]['work'].map(work =>\n              <View>\n               <Image\n          style={{width: 50, height: 50}}\n          source={{uri: work.best_book[0].image_url[0]}}\n        />\n               <Text> { work.best_book[0].title[0]}</Text> \n               <Button title=\"Add To Library\" onPress={()=>this.addToLibrary(work.best_book[0].title[0])}/>\n               <Button title=\"Start Discussion\"  onPress={()=>this.startDiscussion(work.best_book[0].title[0])}/>\n               \n               </View>\n               )\n            \n           \n          }\n          </View>  \n         ) })}\n      </View>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}